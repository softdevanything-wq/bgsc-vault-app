<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>모바일 뷰포트 테스트</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0e1a;
            color: white;
        }
        
        .info-box {
            background: #1a1f2e;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
        }
        
        .info-item {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 6px;
        }
        
        .label {
            color: #999;
        }
        
        .value {
            font-weight: bold;
            color: #8C5AFF;
        }
        
        .test-button {
            width: 100%;
            padding: 16px;
            background: #8C5AFF;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            margin: 10px 0;
            cursor: pointer;
        }
        
        .test-button:active {
            background: #7c4ff3;
        }
        
        #status {
            padding: 20px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid #10b981;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
        }
        
        #status.show {
            display: block;
        }
    </style>
</head>
<body>
    <h1 style="text-align: center;">모바일 뷰포트 테스트</h1>
    
    <div class="info-box">
        <h3>화면 정보</h3>
        <div class="info-item">
            <span class="label">Window Width</span>
            <span class="value" id="windowWidth">-</span>
        </div>
        <div class="info-item">
            <span class="label">Window Height</span>
            <span class="value" id="windowHeight">-</span>
        </div>
        <div class="info-item">
            <span class="label">Screen Width</span>
            <span class="value" id="screenWidth">-</span>
        </div>
        <div class="info-item">
            <span class="label">Screen Height</span>
            <span class="value" id="screenHeight">-</span>
        </div>
        <div class="info-item">
            <span class="label">Available Height</span>
            <span class="value" id="availHeight">-</span>
        </div>
        <div class="info-item">
            <span class="label">Device Pixel Ratio</span>
            <span class="value" id="pixelRatio">-</span>
        </div>
        <div class="info-item">
            <span class="label">User Agent</span>
            <span class="value" id="userAgent" style="font-size: 10px; word-break: break-all;">-</span>
        </div>
        <div class="info-item">
            <span class="label">Safe Area Top</span>
            <span class="value" id="safeAreaTop">-</span>
        </div>
        <div class="info-item">
            <span class="label">Safe Area Bottom</span>
            <span class="value" id="safeAreaBottom">-</span>
        </div>
    </div>
    
    <button class="test-button" onclick="testModalHeight()">모달 높이 테스트</button>
    <button class="test-button" onclick="location.href='/'" style="background: #666;">메인 앱으로 이동</button>
    
    <div id="status">
        <h4>모달 권장 설정</h4>
        <div id="recommendations"></div>
    </div>
    
    <script>
        function updateInfo() {
            document.getElementById('windowWidth').textContent = window.innerWidth + 'px';
            document.getElementById('windowHeight').textContent = window.innerHeight + 'px';
            document.getElementById('screenWidth').textContent = screen.width + 'px';
            document.getElementById('screenHeight').textContent = screen.height + 'px';
            document.getElementById('availHeight').textContent = screen.availHeight + 'px';
            document.getElementById('pixelRatio').textContent = window.devicePixelRatio;
            
            const ua = navigator.userAgent;
            document.getElementById('userAgent').textContent = ua;
            
            // Safe area 계산
            const style = getComputedStyle(document.documentElement);
            const safeTop = style.getPropertyValue('--safe-area-inset-top') || 
                           getComputedStyle(document.documentElement).paddingTop || '0px';
            const safeBottom = style.getPropertyValue('--safe-area-inset-bottom') || 
                              getComputedStyle(document.documentElement).paddingBottom || '0px';
            
            document.getElementById('safeAreaTop').textContent = safeTop;
            document.getElementById('safeAreaBottom').textContent = safeBottom;
            
            // MetaMask/Trust Wallet 감지
            if (ua.includes('MetaMaskMobile') || ua.includes('TrustWallet')) {
                document.body.style.borderTop = '5px solid #f59e0b';
            }
        }
        
        function testModalHeight() {
            const vh = window.innerHeight;
            const recommendedMaxHeight = vh - 120; // 상하 여백 60px씩
            const mobileMaxHeight = vh - 80; // 모바일용
            
            const status = document.getElementById('status');
            const recommendations = document.getElementById('recommendations');
            
            recommendations.innerHTML = `
                <p>• 현재 뷰포트 높이: ${vh}px</p>
                <p>• 권장 모달 최대 높이: ${recommendedMaxHeight}px</p>
                <p>• 모바일 모달 최대 높이: ${mobileMaxHeight}px</p>
                <p>• 안전 영역 상단: ${window.getComputedStyle(document.documentElement).getPropertyValue('padding-top') || '0px'}</p>
                <p>• 안전 영역 하단: ${window.getComputedStyle(document.documentElement).getPropertyValue('padding-bottom') || '0px'}</p>
                ${window.innerHeight < 700 ? '<p style="color: #f59e0b;">⚠️ 작은 화면 감지: 추가 최적화 필요</p>' : ''}
            `;
            
            status.classList.add('show');
        }
        
        // 초기 실행
        updateInfo();
        
        // 화면 회전이나 크기 변경 시 업데이트
        window.addEventListener('resize', updateInfo);
        window.addEventListener('orientationchange', updateInfo);
        
        // 1초마다 업데이트 (디버깅용)
        setInterval(updateInfo, 1000);
    </script>
</body>
</html>